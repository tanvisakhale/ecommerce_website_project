<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Details</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-light">
  <div class="container">
    <a class="navbar-brand" href="index.html">E-Shop</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
   <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-auto align-items-center">
        <li class="nav-item"><a class="nav-link" href="products.html">Products</a></li>
        <li class="nav-item"><a class="nav-link" href="category.html">Categories</a></li>
        <li class="nav-item"><a class="nav-link" href="about.html">About Us</a></li>
        <li class="nav-item"><a class="nav-link" href="contact.html">Contact</a></li>
      </ul>
      <form class="d-flex ms-3" role="search" action="products.html" method="get" style="max-width:250px;">
        <input class="form-control form-control-sm me-2" type="search" name="q" placeholder="Search products..." aria-label="Search">
        <button class="btn btn-outline-primary btn-sm" type="submit" aria-label="Search"><i class="bi bi-search"></i></button>
      </form>
      <a class="nav-link px-2 ms-2" href="cart.html" aria-label="Cart" title="Cart">
        <i class="bi bi-cart3 fs-5"></i>
      </a>
    </div>
  </div>
</nav>
<section class="py-5">
  <div class="container">
    <div class="row">
      <div class="col-md-6">
        <img id="productImage" src="https://via.placeholder.com/400x400?text=Product+Image" class="img-fluid mb-3" alt="Product">
      </div>
      <div class="col-md-6">
        <h2 id="productName">Product Name</h2>
        <p class="lead" id="productPrice">₹0.00</p>
        <div id="productDetails" class="mb-3">
          <p><strong>Category:</strong> <span id="productCategory">-</span></p>
          <p><strong>Availability:</strong> <span id="productAvailability">In Stock</span></p>
        </div>
        <p id="productDescription">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse varius enim in eros elementum tristique.</p>
        <button class="btn btn-primary mb-2" id="addToCartBtn"><i class="bi bi-cart-plus"></i> Add to Cart</button>
        <a href="cart.html" class="btn btn-outline-secondary mb-2 ms-2" id="viewCartBtn"><i class="bi bi-bag"></i> View Cart</a>
        <button class="btn btn-success mb-2 ms-2" id="buyNowBtn"><i class="bi bi-credit-card"></i> Buy Now</button>
      </div>
    </div>
    <div class="row mt-5">
      <div class="col-12">
        <h4>Related Products</h4>
        <div class="row" id="relatedProducts"></div>
      </div>
    </div>
  </div>
</section>
<footer class="bg-dark text-white py-4">
  <div class="container text-center">
    <p>&copy; TANVI SAKHALE 2025 E-Shop.</p>
    <p>
      <a href="about.html" class="text-white">About Us</a> |
      <a href="contact.html" class="text-white">Contact</a>
    </p>
  </div>
</footer>
    <!-- Scroll to Top -->
    <button id="scrollTopBtn" class="btn btn-primary position-fixed d-none" style="bottom:20px;right:20px;z-index:1000;">↑</button>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/script.js"></script>
    <script>
      // Show scroll-to-top button only when scrolling down
      const scrollBtn = document.getElementById('scrollTopBtn');
      window.onscroll = function() {
        if (document.body.scrollTop > 200 || document.documentElement.scrollTop > 200) {
          scrollBtn.classList.remove('d-none');
        } else {
          scrollBtn.classList.add('d-none');
        }
      };
      scrollBtn.onclick = function() {
        window.scrollTo({top:0,behavior:'smooth'});
      };
      // Product view dynamic content
      document.addEventListener('DOMContentLoaded', function() {
        const urlParams = new URLSearchParams(window.location.search);
        const productId = urlParams.get('id');
        // Use window.products or fallback to products from script.js
        const allProducts = window.products || (typeof products !== 'undefined' ? products : []);
        if (productId && allProducts.length) {
          const product = allProducts.find(p => p.id === parseInt(productId));
          if (product) {
            document.getElementById('productName').textContent = product.name;
            document.getElementById('productPrice').textContent = (window.formatPrice ? window.formatPrice(product.price) : `₹${product.price}`);
            document.getElementById('productImage').src = product.image;
            document.getElementById('productDescription').textContent = product.description || `This is a high-quality ${product.name} available at an amazing price.`;
            document.getElementById('productCategory').textContent = product.category.charAt(0).toUpperCase() + product.category.slice(1);
            document.getElementById('productAvailability').textContent = product.stock !== undefined ? (product.stock > 0 ? 'In Stock' : 'Out of Stock') : 'In Stock';
            document.getElementById('addToCartBtn').onclick = function() { window.addToCart(product.id); if(window.showNotification) window.showNotification('Product added to cart!'); };
            document.getElementById('viewCartBtn').onclick = function(e) { e.preventDefault(); window.location.href = 'cart.html'; };
            document.getElementById('buyNowBtn').onclick = function() { window.addToCart(product.id); window.location.href = 'checkout.html'; };
            // Related products
            const related = allProducts.filter(p => p.category === product.category && p.id !== product.id).slice(0, 4);
            const relatedContainer = document.getElementById('relatedProducts');
            related.forEach(rp => {
              const card = document.createElement('div');
              card.className = 'col-md-3 mb-3';
              card.innerHTML = `<div class='card h-100'><img src='${rp.image}' class='card-img-top' alt='${rp.name}'><div class='card-body d-flex flex-column'><h6 class='card-title'>${rp.name}</h6><p class='card-text text-primary fw-bold'>₹${rp.price.toFixed(2)}</p><a href='product-view.html?id=${rp.id}' class='btn btn-outline-primary btn-sm mt-auto'>View</a></div></div>`;
              relatedContainer.appendChild(card);
            });
          }
        }
      });
    </script>
</body>
</html>